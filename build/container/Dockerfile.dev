FROM ubuntu:18.04
# --- setup kubernetes part ---
RUN apt-get update && apt-get install -y apt-transport-https curl wget git
RUN curl -sLO 'https://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/linux/amd64/kubectl' > /usr/local/bin/kubectl
RUN curl -sLo minikube 'https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64' > /usr/local/bin/minikube && chmod +x /usr/local/bin/minikube
RUN minikube start --vm-driver=none
# --- setup goenv ---
WORKDIR /tmp
RUN wget 'https://dl.google.com/go/go1.13.5.linux-amd64.tar.gz' && tar -C /usr/local -xzf 'go1.13.5.linux-amd64.tar.gz'
ENV PATH $PATH:/usr/local/go/bin
# --- container service part
WORKDIR /fun-cloud-api
COPY . .
# --- download realize (hot reload) part ---
RUN go get gopkg.in/urfave/cli.v2@master && go get github.com/oxequa/realize
EXPOSE 3000
CMD ["realize", "start"," --name='container'"," --run"]